(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/build/tenant"],{1481:function(t,s,e){"use strict";e.r(s);var i=e("bb83"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);s["default"]=n.a},"3d0d":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("scroll-view",{staticClass:"inf",attrs:{"scroll-y":"true"}},[e("image",{staticClass:"close",attrs:{src:"../../static/close.png",eventid:"73d4712d-0"},on:{click:t.close}}),e("swiper",{attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.goodsInf.swipeList,function(s,i){return s?e("swiper-item",{key:s,attrs:{mpcomid:"73d4712d-0-"+i}},[e("image",{attrs:{src:t.static+s}})]):t._e()})),e("div",{staticClass:"mallinf2"},[e("div",{staticClass:"mallinf2price"},[e("span",[t._v("￥"+t._s(t.goodsInf.mallinf.price))]),t.iii?e("image",{attrs:{src:"../../static/close.png"}}):t._e()]),e("div",[t._v(t._s(t.goodsInf.clientGoods.name))]),e("div",{staticClass:"mallinf2s"},[e("span",[t._v("月销："+t._s(t.goodsInf.mallinf.sellStock)+"笔")]),e("span",{attrs:{eventid:"73d4712d-1"},on:{click:t.cg_pop1}},[t._v("评价﹀")]),e("span",[t._v("质保期:"+t._s(t.goodsInf.clientGoods.qualityGuaPeriod)+"天")])])]),e("div",{staticClass:"bggray"}),e("div",{staticClass:"guige"},[e("h1",[t._v("规格")]),e("div",{staticClass:"guigetype"},t._l(t.goodsInf.guigetype,function(s,i){return e("span",{key:i,class:{active:t.type==i},attrs:{eventid:"73d4712d-2-"+i},on:{click:function(s){t.cg_type(i)}}},[t._v(t._s(s.name))])})),e("div",{staticClass:"add"},[e("div",{staticClass:"addedit"},[e("image",{attrs:{src:"../../static/build/minus.png",eventid:"73d4712d-3"},on:{click:function(s){s.stopPropagation(),t.minus(t.type)}}}),e("span",[t._v(t._s(t.goodsInf.guigetype[t.type].num))]),e("image",{attrs:{src:"../../static/build/add.png",eventid:"73d4712d-4"},on:{click:function(s){s.stopPropagation(),t.add(t.type)}}})]),e("span",[t._v("数量")])])],1),e("div",{staticClass:"bggray"}),t.goodsInf.detailinf?e("div",{staticClass:"detail"},[e("wxParse",{attrs:{content:t.goodsInf.detailinf,mpcomid:"73d4712d-1"}})],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pop1,expression:"pop1"}],staticClass:"pop"},[e("comment",{attrs:{list:t.comlist,eventid:"73d4712d-5",mpcomid:"73d4712d-2"},on:{cgpop:t.cgpop}})],1)],1)},n=[];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return n})},"53d9":function(t,s,e){"use strict";var i=e("6bf0"),n=e.n(i);n.a},6471:function(t,s,e){"use strict";e.r(s);var i=e("f00b"),n=e("e725");for(var o in n)"default"!==o&&function(t){e.d(s,t,function(){return n[t]})}(o);e("53d9");var a=e("2877"),r=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,null,null);r.options.__file="tenant.vue",s["default"]=r.exports},"6bf0":function(t,s,e){},"984e":function(t,s,e){"use strict";e.r(s);var i=e("3d0d"),n=e("1481");for(var o in n)"default"!==o&&function(t){e.d(s,t,function(){return n[t]})}(o);e("f76d");var a=e("2877"),r=Object(a["a"])(n["default"],i["a"],i["b"],!1,null,"2e5b6228",null);r.options.__file="goodsInf.vue",s["default"]=r.exports},"9ba6":function(t,s,e){},a835:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=r(e("701a")),n=r(e("984e")),o=r(e("609d")),a=e("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.forEach(function(s){l(t,s,e[s])})}return t}function l(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}var d={data:function(){return{static:"",type:0,malllist:[],typeList:[],mallnum:0,mallprice:0,pop:!1,storeid:"",classid:"",class_id:"",tenant:{},mallname:"",mallname1:"",goodsInf:""}},components:{GoodsInf:n.default},computed:c({},(0,a.mapState)(["goods","otherGoods","goodsPay"])),onLoad:function(t){this.cleanbar(),this.tenant=wx.getStorageSync("tenant"),i.default.settitle(this.tenant.name||"建材城");var s=this.tenant.name.split("").length;this.mallname=this.tenant.name.substring(0,parseInt(s/2)),this.mallname1=this.tenant.name.substring(parseInt(s/2),s),wx.setStorageSync("tenant",""),this.static=i.default.static,this.classid=t.classid,this.storeid=t.storeid,this.req_storeclasslist()},methods:{cg_pop:function(){(this.pop||this.otherGoods.num)&&(this.goodsInf="",this.pop=!this.pop)},cg_type:function(t){this.type=t,this.class_id=this.typeList[t].id,this.req_goodslist()},go_build_mallinf:function(t){this.req_detail(t)},minus:function(t,s){var e=this.goods;this.$store.commit("minusOtherGoods",e[t].guigetype[s].price),e[t].guigetype[s].num-=1,this.$store.commit("setGoods",e),this.$store.commit("setGoodsPay")},add:function(t,s){var e=this.goods;this.$store.commit("addOtherGoods",e[t].guigetype[s].price),e[t].guigetype[s].num+=1,this.$store.commit("setGoods",e),this.$store.commit("setGoodsPay")},malllistmap:function(t){return t.map(function(t){return t.price=Number(t.price).toFixed(2),t.mallnum=0,t})},cleanbar:function(){this.$store.commit("clean"),this.goodsInf="",this.pop=!1},filterdate:function(t){for(var s=[],e=0;e<t.length;e++)s[e]={goodsId:t[e].goodsId,num:t[e].num,specId:t[e].id};return s},req_cartadd:function(){var t=this;if(wx.getStorageSync("token")){var s=this.goodsPay;if(console.log(this.goodsPay),s=s.filter(function(t){return console.log(t.num),t.num>0}),s.length){var e=this.filterdate(s);i.default.request({data:e,url:"cart/add",c:!0}).then(function(s){t.cleanbar(),i.default.totast("加入购物车成功")})}else i.default.totast("请先选择商品")}else wx.navigateTo({url:"../mine/login"})},go_build_pay:function(){if(wx.getStorageSync("token")){var t=this.goodsPay;t=t.filter(function(t){return console.log(t.num),t.num>0}),t.length?(this.goodsInf="",wx.setStorageSync("buildinf",t),wx.navigateTo({url:"../build/pay"})):i.default.totast("请先选择商品")}else wx.navigateTo({url:"../mine/login"})},req_storeclasslist:function(){var t=this;i.default.request({data:{storeid:this.storeid},url:"goods/storeclasslist"}).then(function(s){t.typeList=s,s[0]&&(t.class_id=s[0].id)}).then(function(s){t.req_goodslist()})},req_goodslist:function(){var t=this;i.default.request({data:{storeid:this.storeid,classid:this.class_id},url:"goods/goodslist"}).then(function(s){s.forEach(function(t){t.num=0}),t.malllist=s})},req_detail:function(t){var s=this;console.log(this.goods);var e=this.goods.filter(function(s){return s.clientGoods.id==t});console.log(e),e.length>0?this.goodsInf=e[0]:i.default.request({data:{goodsid:t},url:"goods/goodsdetail"}).then(function(t){var e={},n=new RegExp("/attach/download\\?filePath=","g");e.clientGoods=t.clientGoods,e.detailinf=(0,o.default)(e.clientGoods.detail.replace(n,i.default.static)),t.clientGoodsSpecList[0]&&(t.clientGoodsSpecList.forEach(function(t){t.num=0}),e.mallinf=t.clientGoodsSpecList[0],e.mallinf.picture?e.swipeList=e.mallinf.picture.split(","):e.swipeList=[e.clientGoods.picture]),e.guigetype=t.clientGoodsSpecList,e.index=s.goods.length,s.goodsInf=e;var a=s.goods;a.push(e),s.$store.commit("setGoods",a)})},onClose:function(){this.goodsInf=""}}};s.default=d},bb83:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=a(e("701a")),n=(a(e("984e")),a(e("231e"))),o=e("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.forEach(function(s){c(t,s,e[s])})}return t}function c(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}var l={props:["goodsInf"],data:function(){return{static:i.default.static,type:0}},components:{wxParse:n.default},computed:r({},(0,o.mapState)(["goods"])),methods:{close:function(){this.$emit("onClose")},cg_type:function(t){this.type=t},minus:function(t){this.$store.commit("minusOtherGoods",this.goodsInf.guigetype[t].price),0!=this.goodsInf.guigetype[t].num&&(this.goodsInf.guigetype[t].num-=1,this.setGoods())},add:function(t){this.goodsInf.guigetype[t].num+=1,this.$store.commit("addOtherGoods",this.goodsInf.guigetype[t].price),this.setGoods()},setGoods:function(){var t=this.goods;t[this.goodsInf.index]=this.goodsInf,this.$store.commit("setGoods",t),this.$store.commit("setGoodsPay")}}};s.default=l},c8ad:function(t,s,e){"use strict";e("33f4");var i=o(e("b0ce")),n=o(e("6471"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},e725:function(t,s,e){"use strict";e.r(s);var i=e("a835"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);s["default"]=n.a},f00b:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"mallinf1"},[e("div",{staticClass:"otherinf"},[e("div",{staticClass:"share"},[e("div",[e("button",{staticClass:"shareFriend",attrs:{type:"primary",bindtap:"onShareAppMessage","open-type":"share"}}),e("image",{attrs:{src:"../../static/home/share.png"}}),e("div",[t._v("分享")])],1)]),e("div",{staticClass:"mallname"},[e("p",[t._v(t._s(t.mallname))]),e("p",[t._v(t._s(t.mallname1))])],1),e("div",{staticClass:"malladress"},[e("view",[t._v(t._s(t.tenant.name))]),e("view",[t._v(t._s(t.tenant.address))])])]),e("image",{staticClass:"mallimage",attrs:{src:t.static+t.tenant.picture}})]),e("div",{staticClass:"section"},[e("scroll-view",{staticClass:"nav",attrs:{"scroll-y":"true"}},t._l(t.typeList,function(s,i){return e("div",{key:s,class:{active:t.type==i},attrs:{eventid:"0be3fea6-0-"+i},on:{click:function(s){t.cg_type(i)}}},[t._v(t._s(s.name))])})),e("scroll-view",{staticClass:"list",attrs:{"scroll-y":"true"}},t._l(t.malllist,function(s,i){return e("div",{key:s,staticClass:"mall1inf",attrs:{eventid:"0be3fea6-1-"+i},on:{click:function(e){t.go_build_mallinf(s.id)}}},[e("image",{attrs:{src:t.static+s.picture}}),e("div",[e("p",[t._v(t._s(s.name))]),e("p",[t._v("月销"+t._s(s.num)+"笔")]),e("p",{staticClass:"add"}),e("div",{staticClass:"addedit"},[s.mallnum?e("image",{attrs:{src:"../../static/build/minus.png"}}):t._e(),s.mallnum?e("span",[t._v(t._s(s.mallnum))]):t._e(),e("image",{attrs:{src:"../../static/build/add.png"}})]),e("span",[t._v("￥"+t._s(s.price))]),e("p")],1)])}))],1),e("div",{staticClass:"footer"},[e("div",{staticClass:"edit"},[e("span",{attrs:{eventid:"0be3fea6-2"},on:{click:t.req_cartadd}},[t._v("加入购物车")]),e("span",{attrs:{eventid:"0be3fea6-3"},on:{click:t.go_build_pay}},[t._v("购买")])]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.otherGoods.num,expression:"otherGoods.num"}],staticClass:"mallnum"},[t._v(t._s(t.otherGoods.num))]),e("image",{staticClass:"logo",attrs:{src:"../../static/logo.jpg",eventid:"0be3fea6-4"},on:{click:t.cg_pop}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.otherGoods.num,expression:"otherGoods.num"}],staticClass:"money"},[t._v("￥"+t._s(t.otherGoods.price))])]),t.pop?e("div",{staticClass:"pop",attrs:{eventid:"0be3fea6-9"},on:{click:t.cg_pop}},[e("div",{staticClass:"popcont"},[e("div",{staticClass:"delbar",attrs:{eventid:"0be3fea6-5"},on:{click:function(s){s.stopPropagation(),t.cleanbar(s)}}},[e("image",{attrs:{src:"../../static/mine/del.png"}}),e("span",[t._v("清空购物车")])]),e("scroll-view",{staticClass:"barlist",attrs:{"scroll-y":"true"}},t._l(t.goods,function(s,i){return t.otherGoods.num?e("div",{key:i,staticClass:"add1",attrs:{eventid:"0be3fea6-8-"+i},on:{click:function(t){t.stopPropagation()}}},t._l(s.guigetype,function(s,n){return s.num>0?e("div",{key:n},[e("div",{staticClass:"addedit addedit1"},[e("image",{attrs:{src:"../../static/build/minus.png",eventid:"0be3fea6-6-"+i+"-"+n},on:{click:function(s){s.stopPropagation(),t.minus(i,n)}}}),e("span",[t._v(t._s(s.num))]),e("image",{attrs:{src:"../../static/build/add.png",eventid:"0be3fea6-7-"+i+"-"+n},on:{click:function(s){s.stopPropagation(),t.add(i,n)}}})]),e("span",{staticClass:"barname"},[t._v(t._s(s.name))]),e("span",{staticClass:"barmoney"},[t._v("￥"+t._s(s.price))])]):t._e()})):t._e()}))],1)]):t._e(),t.goodsInf?e("div",{staticClass:"pop"},[e("GoodsInf",{attrs:{goodsInf:t.goodsInf,eventid:"0be3fea6-10",mpcomid:"0be3fea6-0"},on:{onClose:t.onClose}})],1):t._e()])},n=[];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return n})},f76d:function(t,s,e){"use strict";var i=e("9ba6"),n=e.n(i);n.a}},[["c8ad","common/runtime","common/vendor"]]]);