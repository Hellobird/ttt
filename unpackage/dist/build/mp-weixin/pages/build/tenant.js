(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/build/tenant"],{"53d9":function(t,a,s){"use strict";var i=s("6bf0"),e=s.n(i);e.a},6471:function(t,a,s){"use strict";s.r(a);var i=s("6653"),e=s("e725");for(var n in e)"default"!==n&&function(t){s.d(a,t,function(){return e[t]})}(n);s("53d9");var l=s("2877"),c=Object(l["a"])(e["default"],i["a"],i["b"],!1,null,null,null);c.options.__file="tenant.vue",a["default"]=c.exports},6653:function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"mallinf1"},[s("div",{staticClass:"otherinf"},[s("div",{staticClass:"share"},[s("div",[s("button",{staticClass:"shareFriend",attrs:{type:"primary",bindtap:"onShareAppMessage","open-type":"share"}}),s("image",{attrs:{src:"../../static/home/share.png"}}),s("div",[t._v("分享")])],1)]),s("div",{staticClass:"mallname"},[s("p",[t._v(t._s(t.mallname))]),s("p",[t._v(t._s(t.mallname1))])],1),s("div",{staticClass:"malladress"},[s("view",[t._v(t._s(t.tenant.name))]),s("view",[t._v(t._s(t.tenant.address))])])]),s("image",{staticClass:"mallimage",attrs:{src:t.static+t.tenant.picture}})]),s("div",{staticClass:"section"},[s("scroll-view",{staticClass:"nav",attrs:{"scroll-y":"true"}},t._l(t.typeList,function(a,i){return s("div",{key:a,class:{active:t.type==i},attrs:{eventid:"0be3fea6-0-"+i},on:{click:function(a){t.cg_type(i)}}},[t._v(t._s(a.name))])})),s("scroll-view",{staticClass:"list",attrs:{"scroll-y":"true"}},t._l(t.malllist,function(a,i){return s("div",{key:a,staticClass:"mall1inf",attrs:{eventid:"0be3fea6-1-"+i},on:{click:function(s){t.go_build_mallinf(a.id)}}},[s("image",{attrs:{src:t.static+a.picture}}),s("div",[s("p",[t._v(t._s(a.name))]),s("p",[t._v("月销"+t._s(a.num)+"笔")]),s("p",{staticClass:"add"}),s("div",{staticClass:"addedit"},[a.mallnum?s("image",{attrs:{src:"../../static/build/minus.png"}}):t._e(),a.mallnum?s("span",[t._v(t._s(a.mallnum))]):t._e(),s("image",{attrs:{src:"../../static/build/add.png"}})]),s("span",[t._v("￥"+t._s(a.price))]),s("p")],1)])}))],1),s("div",{staticClass:"footer"},[s("div",{staticClass:"edit"},[s("span",[t._v("加入购物车")]),s("span",{attrs:{eventid:"0be3fea6-2"},on:{click:t.go_build_pay}},[t._v("购买")])]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.mallnum,expression:"mallnum"}],staticClass:"mallnum"},[t._v(t._s(t.mallnum))]),s("image",{staticClass:"logo",attrs:{src:"../../static/logo.jpg",eventid:"0be3fea6-3"},on:{click:t.cg_pop}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.mallnum,expression:"mallnum"}],staticClass:"money"},[t._v("￥"+t._s(t.mallprice))])]),t.pop?s("div",{staticClass:"pop",attrs:{eventid:"0be3fea6-7"},on:{click:[t.cg_pop,function(a){a.stopPropagation(),t.cleanbar(a)}]}},[s("div",{staticClass:"popcont"},[t._m(0),s("div",{staticClass:"barlist"},t._l(t.malllist,function(a,i){return a.mallnum?s("div",{key:i,staticClass:"add1",attrs:{eventid:"0be3fea6-6-"+i},on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"addedit addedit1"},[s("image",{attrs:{src:"../../static/build/minus.png",eventid:"0be3fea6-4-"+i},on:{click:function(a){a.stopPropagation(),t.minus(i)}}}),s("span",[t._v(t._s(a.mallnum))]),s("image",{attrs:{src:"../../static/build/add.png",eventid:"0be3fea6-5-"+i},on:{click:function(a){a.stopPropagation(),t.add(i)}}})]),s("span",{staticClass:"barname"},[t._v(t._s(a.name))]),s("span",{staticClass:"barmoney"},[t._v("￥"+t._s(a.price))])]):t._e()}))])]):t._e()])},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"delbar"},[s("image",{attrs:{src:"../../static/mine/del.png"}}),s("span",[t._v("清空购物车")])])}];s.d(a,"a",function(){return i}),s.d(a,"b",function(){return e})},"6bf0":function(t,a,s){},a835:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=e(s("701a"));function e(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{static:"",type:0,malllist:[],typeList:[],mallnum:0,mallprice:0,pop:!1,storeid:"",classid:"",class_id:"",tenant:{},mallname:"",mallname1:""}},onLoad:function(t){this.tenant=wx.getStorageSync("tenant"),i.default.settitle(this.tenant.name||"建材城");var a=this.tenant.name.split("").length;this.mallname=this.tenant.name.substring(0,parseInt(a/2)),this.mallname1=this.tenant.name.substring(parseInt(a/2),a),wx.setStorageSync("tenant",""),this.static=i.default.static,this.classid=t.classid,this.storeid=t.storeid,this.req_storeclasslist()},methods:{cg_pop:function(){(this.pop||this.mallnum)&&(this.pop=!this.pop)},cg_type:function(t){this.type=t,this.class_id=this.typeList[t].id,this.req_goodslist()},go_build_pay:function(){wx.navigateTo({url:"../build/pay"})},go_build_mallinf:function(t){wx.navigateTo({url:"../build/mallinf?_id=".concat(t)})},minus:function(t){this.malllist[t].mallnum-=1,this.mallnum-=1,this.mallprice=(Number(this.mallprice)-Number(this.malllist[t].price)).toFixed(2),0==this.mallnum&&(this.pop=!1)},add:function(t){this.malllist[t].mallnum+=1,this.mallnum+=1,this.mallprice=(Number(this.mallprice)+Number(this.malllist[t].price)).toFixed(2)},malllistmap:function(t){return t.map(function(t){return t.price=Number(t.price).toFixed(2),t.mallnum=0,t})},cleanbar:function(){this.mallnum=0,this.mallprice=0,this.malllist=this.malllistmap(this.malllist),this.pop=!1},req_storeclasslist:function(){var t=this;i.default.request({data:{storeid:this.storeid},url:"goods/storeclasslist"}).then(function(a){t.typeList=a,a[0]&&(t.class_id=a[0].id)}).then(function(a){t.req_goodslist()})},req_goodslist:function(){var t=this;i.default.request({data:{storeid:this.storeid,classid:this.class_id},url:"goods/goodslist"}).then(function(a){a.forEach(function(t){t.num=0}),t.malllist=a})}}};a.default=n},c8ad:function(t,a,s){"use strict";s("33f4");var i=n(s("b0ce")),e=n(s("6471"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(e.default))},e725:function(t,a,s){"use strict";s.r(a);var i=s("a835"),e=s.n(i);for(var n in i)"default"!==n&&function(t){s.d(a,t,function(){return i[t]})}(n);a["default"]=e.a}},[["c8ad","common/runtime","common/vendor"]]]);