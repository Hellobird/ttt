(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/shopcart"],{"29fe":function(t,i,n){"use strict";n("33f4");var s=c(n("b0ce")),e=c(n("a5e7"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(e.default))},4941:function(t,i,n){"use strict";var s=n("a89f"),e=n.n(s);e.a},5759:function(t,i,n){"use strict";var s=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("view",[n("div",{staticClass:"shopping-car"},[n("div",{staticClass:"shopping-options-wrap"},[n("ul",{staticClass:"shopping-options"},[n("li",{staticClass:"shopping-option-item shopping-collect",attrs:{eventid:"6c641c75-0"},on:{click:t.delcart}},[t._v("删除")])],1)],1),n("div",{staticClass:"shopping-goods-container"},t._l(t.list,function(i,s){return n("div",{key:i,staticClass:"shopping-goods-list"},[n("div",{staticClass:"shopping-seller"},[t._v(t._s(i.storename))]),t._l(i.cartlist,function(i,e){return n("div",{key:i,staticClass:"shopping-goods-item"},[i.checked?n("input",{attrs:{type:"radio",checked:"",eventid:"6c641c75-1-"+s+"-"+e},on:{click:function(i){t.checked(s,e)}}}):n("input",{attrs:{type:"radio",readonly:"true",eventid:"6c641c75-2-"+s+"-"+e},on:{click:function(i){t.checked(s,e)}}}),n("div",{staticClass:"shopping-goods-img"},[n("image",{staticClass:"noimage",attrs:{src:t.static+i.picture}})]),n("div",{staticClass:"shopping-good-info"},[n("p",{staticClass:"shopping-good-name"},[t._v(t._s(i.goodsName))]),i.goodsSpecName?n("div",{staticClass:"shopping-good-type"},[t._v("规格: "+t._s(i.goodsSpecName))]):t._e(),n("div",{staticClass:"shopping-good-price"},[n("span",[t._v("¥ "+t._s(i.price))]),n("ul",{staticClass:"shopping-num-container"},[n("li",{staticClass:"shopping-option",attrs:{eventid:"6c641c75-3-"+s+"-"+e},on:{click:function(i){t.del(s,e)}}},[t._v("-")]),n("li",[t._v(t._s(i.num))]),n("li",{staticClass:"shopping-option shopping-add",attrs:{eventid:"6c641c75-4-"+s+"-"+e},on:{click:function(i){t.add(s,e)}}},[t._v("+")])],1)],1)],1)])}),i.allnum?n("div",{staticClass:"shopping-all"},[n("span",[t._v("合计：")]),n("span",[t._v("￥"+t._s(i.allmoneynum))]),n("span",{attrs:{eventid:"6c641c75-5-"+s},on:{click:function(i){t.go_build_pay(s)}}},[t._v("结算（"+t._s(i.allnum)+"）")])]):t._e()],2)}))])])},e=[];n.d(i,"a",function(){return s}),n.d(i,"b",function(){return e})},"5f16":function(t,i,n){"use strict";n.r(i);var s=n("bcb0"),e=n.n(s);for(var c in s)"default"!==c&&function(t){n.d(i,t,function(){return s[t]})}(c);i["default"]=e.a},a5e7:function(t,i,n){"use strict";n.r(i);var s=n("5759"),e=n("5f16");for(var c in e)"default"!==c&&function(t){n.d(i,t,function(){return e[t]})}(c);n("4941");var a=n("2877"),o=Object(a["a"])(e["default"],s["a"],s["b"],!1,null,null,null);o.options.__file="shopcart.vue",i["default"]=o.exports},a89f:function(t,i,n){},bcb0:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e(n("701a"));function e(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{list:[],static:""}},onLoad:function(){wx.getStorageSync("token")||this.go_mine_login()},onShow:function(){this.static=s.default.static,wx.getStorageSync("token")&&this.req_cartlist()},methods:{error:function(t,i){this.list[t].cartlist[i].picture="../../static/build/mall.jpg"},go_mine_login:function(){wx.navigateTo({url:"../mine/login"})},go_build_pay:function(t){var i=this.list[t].cartlist.filter(function(t){return t.checked});console.log(JSON.stringify(i)),wx.setStorageSync("buildinf",i),wx.navigateTo({url:"../build/pay"})},checked:function(t,i){console.log(t,i),this.list[t].cartlist[i].checked=!this.list[t].cartlist[i].checked,this.com()},com:function(){this.list.forEach(function(t){var i=0,n=0;t.cartlist.forEach(function(t){t.checked&&(i+=t.num,n+=Number(t.price)*t.num.toFixed(2))}),t.allnum=i,t.allmoneynum=n.toFixed(2)})},add:function(t,i){this.list[t].cartlist[i].num+=1,this.req_updateNum(t,i),this.com()},del:function(t,i){1!=this.list[t].cartlist[i].num&&(this.list[t].cartlist[i].num-=1,this.req_updateNum(t,i),this.com())},req_updateNum:function(t,i){s.default.request({url:"cart/updateNum",data:{cartid:this.list[t].cartlist[i].id,num:this.list[t].cartlist[i].num}}).then(function(t){})},delcart:function(){var t=this;this.list.forEach(function(i,n){i.cartlist.forEach(function(i,s){i.checked&&t.req_delete(i.id,n,s)})})},req_delete:function(t,i,n){var e=this;s.default.request({url:"cart/delete",data:{cartid:t}}).then(function(t){e.list[i].cartlist.splice(n,1),e.list[i].cartlist.length||e.list.splice(i,1)})},req_cartlist:function(){var t=this;s.default.request({url:"cart/list"}).then(function(i){i.forEach(function(t){t.allnum=0,t.allmoneynum=0,t.cartlist.forEach(function(t){t.checked=!1,t.picture&&(t.picture=t.picture.split(",")[0])})}),t.list=i})}}};i.default=c}},[["29fe","common/runtime","common/vendor"]]]);